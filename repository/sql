// -- postgres

// // create schema shorturl;
// // -- сокращатель ссылок (короткая и оригинальная записи)
// create table shortedurl(                             
//     id serial primary key not null,
//     shorturl varchar(7) not null,
//     originalurl varchar(100000) not null, UNIQUE(shorturl,originalurl)
//     userid integer //FIXME добваить foriagn.key
// );

// create index shorturl_index on shortedurl (shorturl);

// --пользователи
// create table users (
//     user_id serial PRIMARY KEY,
//     usermail VARCHAR (100) UNIQUE NOT NULL,
//     password VARCHAR (60) NOT NULL,
//     activate BOOLEAN NOT NULL,
//     create_time_user TIMESTAMP with time zone NULL   
// );

// --добавить поле роль (admin,user)
// --  create table emailactivate (
// -- uid varchar(36) not null,
// -- user_id integer not null, //FIXME добваить foriagn.key
// -- active_until timestamp not null);

// ; activity tabel ->  
// create table activity(
//     activity_id serial primary key not null,
//     shorturl varchar not null,
//     useragent varchar not null,
//     platform varchar not null,
//     click_time TIMESTAMP with time zone NULL
//                TIMESTAMP with time zone NULL 
// );


// 

// агрегирующая функция, которая находит платформы, которые просматривали ссылку и количесвто по каждои платформе
// select platform,count(platform) from activity where shorturl='http://127.0.0.1:8001/lLKHpIy' group by platform

// SELECT count(distinct useragent) as count_unique_visits, count(useragent) as count_vists, shorturl FROM activity WHERE click_time BETWEEN '2023-06-02 00:00:00' AND '2023-06-03 00:00:00' GROUP BY shorturl;