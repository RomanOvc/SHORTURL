Сокращатель ссылок:

Предназначение - Отслеживать клики. Это будет полезно для рекламных кампаний: маркетолог сможет отследить, принесла ли реклама пользу.

1)  создать два эндпоинта и подключить базу данных   postgres: 

        /take_larg_url - принимает оригинальныи url  и возвращает новую ссылку(url+index) -> POST
            табличка shortedurl:
                  id  |  shorturl |  originalurl  | 


        /{url_index} - делает перенаправление на оригинальную ссылку по сгенерированнои -> GET
            как работает:
                если url_index есть в табличке  shortedurl делаем редирект по  оригинальнои ссылке, взятои из тои же таблички.

2)Авторизация и аутентификация
    а) создание пользователя:
        /auth - создание пользоватлея принимает   email и pass -> POST
            // json структура запроса
                {
                    "usereamil":"lol@mail.com"
                    "password" : "you_pass"
                }
            как работает:
                пользователь отправляет логин и пароль. Если такого пользователя нет, то данные записываются в базу, а так же отправляется письмо с подтверждением
            таблички users и emailactivate:
                users:
                    user_id | usermail | password | activate | create_user |

                //FIXME - нужно проверять время жизни ссылки активасии.Если время истечет, то удалить запись из базы и при последующеи аутентификации пользователя отправить поыторное письмо
                emailactivate :
                    uid | user_id | active_until 

    б) аутентификация               
        /auth - аутентификация пользователя в системе -> PUT 
        как работает:
            пользователь вводит свои авторизационные данные (логин и пароль). Эти данные проверяются  в базе данных postgres. И проверяем пользователь активировал аккаунт или нет. 
            Если нет просим проверить почту. Если ответ от базы положительныи создается пара  access и refresh  токен

        Примечание. Начиная с момента аутентификации ограничиваем доступ к созданию ссылки. Делается это при помощи access токена и middleware

        Middleware isAuth() -> проверяет существование пользовательского access токена в redis.

        /auth/refresh - ссылка для сбороса refresh и acceess токена. Эта ссылка доступна для активированного пользователя. -> POST
        /auth/confirm/{uuid} - ссылка которая лежит на почте. Выполняет транзакцию обнавления поля activate в табличке users и удаление записи из emailactivate ->
        /auth/forgotpass - ссылка по смене пользователя -> PATCH


        /take_larg_url -> тепереь в базу записывается id пользователя, создавшего ссылку -> POST

Статистика:
        /user/statistic/{url_index}/ - статистика всех посещении
        /user/statistic/{url_index}/count_visit - статистика уникальных посещении ссылки ( уникальность не гарантированна. Приблизительная статистика собрана на основании user agents поситителеи ссылки)

Cron demon - запускает скрипт, которыи собирает статистику уникальных посещении по user agent за суткии общее количество посещении сылки за сутки.
        
